<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>주문 상세 정보 - BookStore Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .sidebar {
            background-color: #343a40;
            min-height: 100vh;
            padding: 20px 0;
        }
        .sidebar a {
            color: #fff;
            text-decoration: none;
            padding: 10px 20px;
            display: block;
            transition: background-color 0.3s;
        }
        .sidebar a:hover {
            background-color: #495057;
        }
        .sidebar .active {
            background-color: #007bff;
        }
        .main-content {
            padding: 30px;
        }
        .detail-section {
            background: white;
            padding: 20px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff;
        }
        .status-timeline {
            display: flex;
            justify-content: space-between;
            margin: 20px 0;
            position: relative;
        }
        .status-timeline::before {
            content: '';
            position: absolute;
            top: 20px;
            left: 0;
            right: 0;
            height: 2px;
            background: #dee2e6;
            z-index: 0;
        }
        .status-item {
            text-align: center;
            position: relative;
            z-index: 1;
            flex: 1;
        }
        .status-circle {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #dee2e6;
            margin: 0 auto 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
        }
        .status-item.active .status-circle {
            background: #007bff;
        }
        .status-item.completed .status-circle {
            background: #28a745;
        }
        .order-summary {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <span class="navbar-brand">📚 BookStore Admin</span>
            <div class="d-flex align-items-center">
                <span class="text-white me-3">관리자님 환영합니다</span>
                <button class="btn btn-outline-light btn-sm" onclick="logout()">로그아웃</button>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- 사이드바 -->
            <div class="col-md-2 sidebar">
                <a href="admin-main.html">🏠 대시보드</a>
                <a href="admin-users.html">👥 회원 관리</a>
                <a href="admin-products.html">📦 상품 관리</a>
                <a href="admin-orders.html" class="active">🛒 주문 관리</a>
                <hr class="bg-white">
                <a href="#" onclick="alert('재고 관리 기능 준비중')">📊 재고 관리</a>
                <a href="#" onclick="alert('통계 기능 준비중')">📈 통계</a>
                <a href="#" onclick="alert('설정 기능 준비중')">⚙️ 설정</a>
            </div>

            <!-- 메인 콘텐츠 -->
            <div class="col-md-10 main-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>주문 상세 정보</h2>
                    <button class="btn btn-secondary" onclick="history.back()">목록으로</button>
                </div>

                <!-- 주문 상태 타임라인 -->
                <div class="detail-section">
                    <h5 class="section-title">주문 처리 상태</h5>
                    <div class="status-timeline">
                        <div class="status-item completed">
                            <div class="status-circle">✓</div>
                            <small>주문접수</small>
                            <br><small class="text-muted">01/15 14:30</small>
                        </div>
                        <div class="status-item completed">
                            <div class="status-circle">✓</div>
                            <small>결제완료</small>
                            <br><small class="text-muted">01/15 14:31</small>
                        </div>
                        <div class="status-item active">
                            <div class="status-circle">●</div>
                            <small>상품준비</small>
                            <br><small class="text-muted">01/15 15:00</small>
                        </div>
                        <div class="status-item">
                            <div class="status-circle"></div>
                            <small>배송중</small>
                            <br><small class="text-muted">-</small>
                        </div>
                        <div class="status-item">
                            <div class="status-circle"></div>
                            <small>배송완료</small>
                            <br><small class="text-muted">-</small>
                        </div>
                    </div>
                </div>

                <!-- 주문 기본 정보 -->
                <div class="detail-section">
                    <h5 class="section-title">주문 정보</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <table class="table table-borderless">
                                <tr>
                                    <th width="30%">주문번호:</th>
                                    <td id="orderId">#ORD2024001</td>
                                </tr>
                                <tr>
                                    <th>주문일시:</th>
                                    <td>2024-01-15 14:30:25</td>
                                </tr>
                                <tr>
                                    <th>주문상태:</th>
                                    <td>
                                        <select class="form-select form-select-sm" style="width: 150px;" id="orderStatus">
                                            <option>신규주문</option>
                                            <option selected>처리중</option>
                                            <option>배송준비</option>
                                            <option>배송중</option>
                                            <option>배송완료</option>
                                            <option>취소</option>
                                            <option>반품</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <th>배송방법:</th>
                                    <td>일반배송</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <table class="table table-borderless">
                                <tr>
                                    <th width="30%">결제방법:</th>
                                    <td>신용카드</td>
                                </tr>
                                <tr>
                                    <th>결제일시:</th>
                                    <td>2024-01-15 14:31:05</td>
                                </tr>
                                <tr>
                                    <th>송장번호:</th>
                                    <td>
                                        <input type="text" class="form-control form-control-sm" style="width: 200px;" placeholder="송장번호 입력">
                                    </td>
                                </tr>
                                <tr>
                                    <th>택배사:</th>
                                    <td>
                                        <select class="form-select form-select-sm" style="width: 150px;">
                                            <option>CJ대한통운</option>
                                            <option>한진택배</option>
                                            <option>롯데택배</option>
                                            <option>우체국택배</option>
                                        </select>
                                    </td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- 구매자 정보 -->
                <div class="detail-section">
                    <h5 class="section-title">구매자 정보</h5>
                    <div class="row">
                        <div class="col-md-6">
                            <table class="table table-borderless">
                                <tr>
                                    <th width="30%">회원번호:</th>
                                    <td>U001</td>
                                </tr>
                                <tr>
                                    <th>구매자명:</th>
                                    <td id="customerName">김철수</td>
                                </tr>
                                <tr>
                                    <th>이메일:</th>
                                    <td>kim@example.com</td>
                                </tr>
                                <tr>
                                    <th>연락처:</th>
                                    <td>010-1234-5678</td>
                                </tr>
                            </table>
                        </div>
                        <div class="col-md-6">
                            <table class="table table-borderless">
                                <tr>
                                    <th width="30%">수령인:</th>
                                    <td>김철수</td>
                                </tr>
                                <tr>
                                    <th>수령인 연락처:</th>
                                    <td>010-1234-5678</td>
                                </tr>
                                <tr>
                                    <th>배송지:</th>
                                    <td>서울시 강남구 테헤란로 123<br>강남빌딩 10층 (우: 06234)</td>
                                </tr>
                                <tr>
                                    <th>배송 메모:</th>
                                    <td>부재시 경비실에 맡겨주세요</td>
                                </tr>
                            </table>
                        </div>
                    </div>
                </div>

                <!-- 주문 상품 정보 -->
                <div class="detail-section">
                    <h5 class="section-title">주문 상품</h5>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>상품코드</th>
                                <th>상품명</th>
                                <th>저자</th>
                                <th>출판사</th>
                                <th>단가</th>
                                <th>수량</th>
                                <th>소계</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>B001</td>
                                <td id="productName">자바의 정석</td>
                                <td>남궁성</td>
                                <td>도우출판</td>
                                <td>₩30,000</td>
                                <td>1</td>
                                <td>₩30,000</td>
                            </tr>
                        </tbody>
                    </table>
                </div>

                <!-- 결제 정보 -->
                <div class="detail-section">
                    <h5 class="section-title">결제 정보</h5>
                    <div class="order-summary">
                        <div class="row">
                            <div class="col-md-6">
                                <table class="table table-borderless mb-0">
                                    <tr>
                                        <th>상품 금액:</th>
                                        <td class="text-end">₩30,000</td>
                                    </tr>
                                    <tr>
                                        <th>배송비:</th>
                                        <td class="text-end">₩0</td>
                                    </tr>
                                    <tr>
                                        <th>할인 금액:</th>
                                        <td class="text-end text-danger">-₩3,000</td>
                                    </tr>
                                    <tr class="border-top">
                                        <th>총 결제 금액:</th>
                                        <td class="text-end"><strong class="text-primary fs-5">₩27,000</strong></td>
                                    </tr>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <table class="table table-borderless mb-0">
                                    <tr>
                                        <th>결제 수단:</th>
                                        <td>신한카드 (****1234)</td>
                                    </tr>
                                    <tr>
                                        <th>승인번호:</th>
                                        <td>12345678</td>
                                    </tr>
                                    <tr>
                                        <th>결제 상태:</th>
                                        <td><span class="badge bg-success">결제완료</span></td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- 관리 메모 -->
                <div class="detail-section">
                    <h5 class="section-title">관리자 메모</h5>
                    <textarea class="form-control" rows="3" placeholder="주문 처리 관련 메모를 입력하세요..."></textarea>
                </div>

                <!-- 관리 버튼 -->
                <div class="d-flex justify-content-end gap-2">
                    <button class="btn btn-primary" onclick="saveOrder()">정보 저장</button>
                    <button class="btn btn-success" onclick="processShipping()">배송 처리</button>
                    <button class="btn btn-warning" onclick="printInvoice()">송장 출력</button>
                    <button class="btn btn-danger" onclick="cancelOrder()">주문 취소</button>
                    <button class="btn btn-secondary" onclick="history.back()">목록으로</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // URL 파라미터에서 주문 ID 가져오기
        const urlParams = new URLSearchParams(window.location.search);
        const orderId = urlParams.get('id');
        
        // 주문 정보 로드 (실제로는 서버에서 데이터를 가져옴)
        function loadOrderInfo() {
            const orderInfo = {
                'ORD2024001': { customer: '김철수', product: '자바의 정석', amount: 30000, status: '처리중' },
                'ORD2024002': { customer: '이영희', product: '스프링 부트 실전', amount: 35000, status: '처리중' },
                'ORD2024003': { customer: '박민수', product: '클린 코드', amount: 28000, status: '배송중' },
                'ORD2024004': { customer: '정수진', product: '리팩토링 2판', amount: 32000, status: '배송완료' },
                'ORD2024005': { customer: '최현우', product: '이펙티브 자바 3판', amount: 36000, status: '취소' }
            };
            
            if (orderId && orderInfo[orderId]) {
                document.getElementById('orderId').textContent = `#${orderId}`;
                document.getElementById('customerName').textContent = orderInfo[orderId].customer;
                document.getElementById('productName').textContent = orderInfo[orderId].product;
            }
        }
        
        loadOrderInfo();

        function logout() {
            if (confirm('로그아웃 하시겠습니까?')) {
                window.location.href = '/admin/login/logout';
            }
        }

        function saveOrder() {
            alert('주문 정보가 저장되었습니다.');
        }

        function processShipping() {
            if (confirm('배송 처리를 시작하시겠습니까?')) {
                alert('배송 처리가 시작되었습니다.');
            }
        }

        function printInvoice() {
            alert('송장 출력 기능 준비중입니다.');
        }

        function cancelOrder() {
            if (confirm('정말로 이 주문을 취소하시겠습니까?\n결제 취소 처리도 함께 진행됩니다.')) {
                alert('주문이 취소되었습니다.');
            }
        }
    </script>
</body>
</html>