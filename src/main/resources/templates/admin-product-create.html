<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ìƒí’ˆ ë“±ë¡ - BookStore Admin</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        .sidebar {
            background-color: #343a40;
            min-height: 100vh;
            padding: 20px 0;
        }
        .sidebar a {
            color: #fff;
            text-decoration: none;
            padding: 10px 20px;
            display: block;
            transition: background-color 0.3s;
        }
        .sidebar a:hover {
            background-color: #495057;
        }
        .sidebar .active {
            background-color: #007bff;
        }
        .main-content {
            padding: 30px;
        }
        .form-section {
            background: white;
            padding: 25px;
            border-radius: 8px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .section-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #007bff;
        }
        .required {
            color: #dc3545;
        }
    </style>
</head>
<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-fluid">
            <span class="navbar-brand">ğŸ“š BookStore Admin</span>
            <div class="d-flex align-items-center">
                <span class="text-white me-3">ê´€ë¦¬ìë‹˜ í™˜ì˜í•©ë‹ˆë‹¤</span>
                <button class="btn btn-outline-light btn-sm" onclick="logout()">ë¡œê·¸ì•„ì›ƒ</button>
            </div>
        </div>
    </nav>

    <div class="container-fluid">
        <div class="row">
            <!-- ì‚¬ì´ë“œë°” -->
            <div class="col-md-2 sidebar">
                <a href="/admin/main">ğŸ  ëŒ€ì‹œë³´ë“œ</a>
                <a href="/admin/users">ğŸ‘¥ íšŒì› ê´€ë¦¬</a>
                <a href="/admin/product" class="active">ğŸ“¦ ìƒí’ˆ ê´€ë¦¬</a>
                <a href="/admin/order">ğŸ›’ ì£¼ë¬¸ ê´€ë¦¬</a>
                <hr class="bg-white">
                <a href="#" onclick="alert('ì¬ê³  ê´€ë¦¬ ê¸°ëŠ¥ ì¤€ë¹„ì¤‘')">ğŸ“Š ì¬ê³  ê´€ë¦¬</a>
                <a href="#" onclick="alert('í†µê³„ ê¸°ëŠ¥ ì¤€ë¹„ì¤‘')">ğŸ“ˆ í†µê³„</a>
                <a href="#" onclick="alert('ì„¤ì • ê¸°ëŠ¥ ì¤€ë¹„ì¤‘')">âš™ï¸ ì„¤ì •</a>
            </div>

            <!-- ë©”ì¸ ì½˜í…ì¸  -->
            <div class="col-md-10 main-content">
                <div class="d-flex justify-content-between align-items-center mb-4">
                    <h2>ìƒˆ ìƒí’ˆ ë“±ë¡</h2>
                    <button class="btn btn-secondary" onclick="history.back()">ëª©ë¡ìœ¼ë¡œ</button>
                </div>

                <form id="productForm" action="/admin/product/create" method="POST">
                    <!-- ê¸°ë³¸ ì •ë³´ -->
                    <div class="form-section">
                        <h5 class="section-title">ê¸°ë³¸ ì •ë³´</h5>
                        <div class="row">
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="productName" class="form-label">ìƒí’ˆëª… <span class="required">*</span></label>
                                    <input type="text" class="form-control" id="productName" name="bookName" placeholder="ì˜ˆ: ìë°”ì˜ ì •ì„" required>
                                </div>
                                <div class="mb-3">
                                    <label for="author" class="form-label">ì €ì <span class="required">*</span></label>
                                    <input type="text" class="form-control" id="author" name="author" placeholder="ì˜ˆ: ë‚¨ê¶ì„±" required>
                                </div>
                                <div class="mb-3">
                                    <label for="publisher" class="form-label">ì¶œíŒì‚¬ <span class="required">*</span></label>
                                    <input type="text" class="form-control" id="publisher" name="publisher" placeholder="ì˜ˆ: ë„ìš°ì¶œíŒ" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="mb-3">
                                    <label for="isbn" class="form-label">ISBN <span class="required">*</span></label>
                                    <input type="text" class="form-control" id="isbn" name="isbn" placeholder="ì˜ˆ: 9788994492032" required>
                                </div>
                                <div class="mb-3">
                                    <label for="category" class="form-label">ì¹´í…Œê³ ë¦¬ <span class="required">*</span></label>
                                    <select class="form-select" id="category" name="bookCategory" required>
                                        <option value="">ì„ íƒí•˜ì„¸ìš”</option>
                                        <option value="programming">í”„ë¡œê·¸ë˜ë°</option>
                                        <option value="novel">ì†Œì„¤</option>
                                        <option value="self-help">ìê¸°ê³„ë°œ</option>
                                        <option value="business">ê²½ì œ/ê²½ì˜</option>
                                        <option value="science">ê³¼í•™</option>
                                        <option value="history">ì—­ì‚¬</option>
                                    </select>
                                </div>
                                <div class="mb-3">
                                    <label for="publishDate" class="form-label">ì¶œê°„ì¼</label>
                                    <input type="date" class="form-control" id="publishDate" name="publishDate">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ê°€ê²© ì •ë³´ -->
                    <div class="form-section">
                        <h5 class="section-title">ê°€ê²© ì •ë³´</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="originalPrice" class="form-label">ì •ê°€ <span class="required">*</span></label>
                                    <div class="input-group">
                                        <span class="input-group-text">â‚©</span>
                                        <input type="number" class="form-control" id="originalPrice" name="regularPrice" placeholder="30000" required onchange="calculateDiscount()">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="salePrice" class="form-label">íŒë§¤ê°€ <span class="required">*</span></label>
                                    <div class="input-group">
                                        <span class="input-group-text">â‚©</span>
                                        <input type="number" class="form-control" id="salePrice" name="salePrice" placeholder="27000" required onchange="calculateDiscount()">
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="discountRate" class="form-label">í• ì¸ìœ¨</label>
                                    <div class="input-group">
                                        <input type="number" class="form-control" id="discountRate" name="discountRate" value="0" readonly>
                                        <span class="input-group-text">%</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ì¬ê³  ì •ë³´ -->
                    <div class="form-section">
                        <h5 class="section-title">ì¬ê³  ì •ë³´</h5>
                        <div class="row">
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="initialStock" class="form-label">ì´ˆê¸° ì¬ê³  <span class="required">*</span></label>
                                    <input type="number" class="form-control" id="initialStock" name="product" placeholder="50" required>
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="minStock" class="form-label">ìµœì†Œ ì¬ê³ </label>
                                    <input type="number" class="form-control" id="minStock" name="minProduct" placeholder="10">
                                </div>
                            </div>
                            <div class="col-md-4">
                                <div class="mb-3">
                                    <label for="maxStock" class="form-label">ìµœëŒ€ ì¬ê³ </label>
                                    <input type="number" class="form-control" id="maxStock" name="maxProduct" placeholder="100">
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- ìƒí’ˆ ì„¤ëª… -->
                    <div class="form-section">
                        <h5 class="section-title">ìƒí’ˆ ì„¤ëª…</h5>
                        <div class="mb-3">
                            <label for="description" class="form-label">ìƒí’ˆ ì„¤ëª…</label>
                            <textarea class="form-control" id="description" name="explanation" rows="5" placeholder="ìƒí’ˆì— ëŒ€í•œ ìƒì„¸í•œ ì„¤ëª…ì„ ì…ë ¥í•˜ì„¸ìš”..."></textarea>
                        </div>
                    </div>

                    <!-- ë²„íŠ¼ -->
                    <div class="d-flex justify-content-end gap-2">
                        <button type="button" class="btn btn-secondary" onclick="cancelRegistration()">ì·¨ì†Œ</button>
                        <button type="submit" class="btn btn-primary">ì €ì¥</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <script>
        // í• ì¸ìœ¨ ìë™ ê³„ì‚°
        function calculateDiscount() {
            const originalPrice = document.getElementById('originalPrice').value;
            const salePrice = document.getElementById('salePrice').value;
            
            if (originalPrice && salePrice && originalPrice > 0) {
                const discount = ((originalPrice - salePrice) / originalPrice * 100).toFixed(1);
                document.getElementById('discountRate').value = discount > 0 ? discount : 0;
            }
        }

        // í¼ ì œì¶œ
        document.getElementById('productForm').addEventListener('submit', function(e) {
            // í•„ìˆ˜ í•„ë“œ ê²€ì¦
            const productName = document.getElementById('productName').value;
            const author = document.getElementById('author').value;
            const publisher = document.getElementById('publisher').value;
            const isbn = document.getElementById('isbn').value;
            const category = document.getElementById('category').value;
            const originalPrice = document.getElementById('originalPrice').value;
            const salePrice = document.getElementById('salePrice').value;
            const initialStock = document.getElementById('initialStock').value;
            
            if (!productName || !author || !publisher || !isbn || !category || !originalPrice || !salePrice || !initialStock) {
                alert('í•„ìˆ˜ í•­ëª©ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                e.preventDefault(); // ê²€ì¦ ì‹¤íŒ¨ ì‹œì—ë§Œ ì œì¶œ ë°©ì§€
                return;
            }
            
            // ê°€ê²© ê²€ì¦
            if (parseInt(salePrice) > parseInt(originalPrice)) {
                alert('íŒë§¤ê°€ëŠ” ì •ê°€ë³´ë‹¤ ë†’ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                e.preventDefault();
                return;
            }
            
            // ê²€ì¦ í†µê³¼ ì‹œ í¼ì´ ìë™ìœ¼ë¡œ ì œì¶œë¨ (e.preventDefault()ë¥¼ í˜¸ì¶œí•˜ì§€ ì•ŠìŒ)
            console.log('ìƒí’ˆ ë“±ë¡ í¼ ì œì¶œ ì¤‘...');
        });

        // ì·¨ì†Œ
        function cancelRegistration() {
            if (confirm('ì…ë ¥í•œ ë‚´ìš©ì´ ì €ì¥ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ì·¨ì†Œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                window.location.href = '/admin/product';
            }
        }

        // ë¡œê·¸ì•„ì›ƒ
        function logout() {
            if (confirm('ë¡œê·¸ì•„ì›ƒ í•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) {
                window.location.href = '/admin/login/logout';
            }
        }
    </script>
</body>
</html>